<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Admin Dashboard - DigiKul</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivv.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-mortarboard me-2"></i>DigiKul
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">
                    Welcome, <strong id="userName">System Administrator</strong>
                </span>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">
                    <i class="bi bi-box-arrow-right me-1"></i>Logout
                </button>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Dashboard Header -->
    <div class="row mb-4">
            <div class="col">
                <h1><i class="bi bi-building me-2"></i>Super Admin Dashboard</h1>
                <p class="text-muted">Manage institutions and platform-wide settings</p>
                </div>
            <div class="col-auto">
                <button class="btn btn-success me-2" onclick="showCreateInstitutionModal()">
                        <i class="bi bi-building me-2"></i>Create Institution
                    </button>
                <button class="btn btn-primary me-2" onclick="showCreateSuperAdminModal()">
                        <i class="bi bi-person-plus me-2"></i>Add Super Admin
                    </button>
                    <button class="btn btn-outline-secondary" onclick="refreshData()">
                        <i class="bi bi-arrow-clockwise me-2"></i>Refresh
                    </button>
        </div>
    </div>

        <!-- Statistics Cards -->
    <div class="row mb-4">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-building text-primary" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="totalInstitutions">0</h3>
                        <p class="text-muted mb-0">Institutions</p>
                </div>
            </div>
        </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-people text-success" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="totalUsers">0</h3>
                        <p class="text-muted mb-0">Total Users</p>
                </div>
            </div>
        </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-calendar-check text-info" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="totalLectures">0</h3>
                        <p class="text-muted mb-0">Active Lectures</p>
                </div>
            </div>
        </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card text-center">
                    <div class="card-body">
                        <i class="bi bi-graph-up text-warning" style="font-size: 2rem;"></i>
                        <h3 class="mt-2" id="totalQuizzes">0</h3>
                        <p class="text-muted mb-0">Quizzes Created</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Tabs -->
        <div class="card">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs" id="dashboardTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="institutions-tab" data-bs-toggle="tab" data-bs-target="#institutions" type="button" role="tab">
                        <i class="bi bi-building me-2"></i>Institutions
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="super-admins-tab" data-bs-toggle="tab" data-bs-target="#super-admins" type="button" role="tab">
                        <i class="bi bi-shield-check me-2"></i>Super Admins
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="analytics-tab" data-bs-toggle="tab" data-bs-target="#analytics" type="button" role="tab">
                        <i class="bi bi-graph-up me-2"></i>Analytics
                    </button>
                </li>
            </ul>
            </div>

            <div class="card-body">
                <div class="tab-content" id="dashboardTabsContent">
                <!-- Institutions Tab -->
                <div class="tab-pane fade show active" id="institutions" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">Institutions Management</h5>
                            <div class="input-group" style="width: 300px;">
                                <span class="input-group-text"><i class="bi bi-search"></i></span>
                                <input type="text" class="form-control" id="institutionSearch" placeholder="Search institutions...">
                                </div>
                            </div>
                        
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Institution</th>
                                            <th>Domain</th>
                                        <th>Contact</th>
                                            <th>Status</th>
                                            <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="institutionsTable">
                                    <tr>
                                        <td colspan="6" class="text-center text-muted py-4">
                                            <i class="bi bi-hourglass-split me-2"></i>Loading institutions...
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                    </div>
                </div>

                <!-- Super Admins Tab -->
                <div class="tab-pane fade" id="super-admins" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">Super Admins Management</h5>
                            </div>
                        
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                        <th>Status</th>
                                            <th>Last Login</th>
                                        <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="superAdminsTable">
                                    <tr>
                                        <td colspan="6" class="text-center text-muted py-4">
                                            <i class="bi bi-hourglass-split me-2"></i>Loading super admins...
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div class="tab-pane fade" id="analytics" role="tabpanel">
                    <div class="row">
                            <div class="col-lg-8">
                            <div class="card">
                                <div class="card-header">
                                        <h5 class="mb-0">Platform Growth</h5>
                                </div>
                                <div class="card-body">
                                        <canvas id="growthChart" height="100"></canvas>
                                </div>
                            </div>
                        </div>
                            <div class="col-lg-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">User Distribution</h5>
                                </div>
                                <div class="card-body">
                                        <canvas id="userChart" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toastContainer"></div>

<!-- Create Institution Modal -->
<div class="modal fade" id="createInstitutionModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">
                        <i class="bi bi-building me-2"></i>Create New Institution
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="createInstitutionForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                    <label for="institutionName" class="form-label">Institution Name *</label>
                                    <input type="text" class="form-control" id="institutionName" name="name" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                    <label for="institutionDomain" class="form-label">Domain *</label>
                                    <input type="text" class="form-control" id="institutionDomain" name="domain" required>
                            </div>
                        </div>
                    </div>
                        
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                    <label for="institutionSubdomain" class="form-label">Subdomain</label>
                                    <input type="text" class="form-control" id="institutionSubdomain" name="subdomain">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                    <label for="institutionEmail" class="form-label">Contact Email *</label>
                                    <input type="email" class="form-control" id="institutionEmail" name="contact_email" required>
                            </div>
                        </div>
                    </div>
                        
                            <div class="mb-3">
                            <label for="institutionDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="institutionDescription" name="description" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createInstitution()">
                        <i class="bi bi-building me-2"></i>Create Institution
                    </button>
            </div>
        </div>
    </div>
</div>

<!-- Create Super Admin Modal -->
<div class="modal fade" id="createSuperAdminModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">
                        <i class="bi bi-person-plus me-2"></i>Create New Super Admin
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="createSuperAdminForm">
                    <div class="mb-3">
                            <label for="adminName" class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="adminName" name="name" required>
                    </div>
                    <div class="mb-3">
                            <label for="adminEmail" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="adminEmail" name="email" required>
                    </div>
                    <div class="mb-3">
                            <label for="adminPassword" class="form-label">Password *</label>
                            <input type="password" class="form-control" id="adminPassword" name="password" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createSuperAdmin()">
                        <i class="bi bi-person-plus me-2"></i>Create Super Admin
                    </button>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Global variables
let institutionsData = [];
let superAdminsData = [];
        let growthChart = null;
        let userChart = null;

// Initialize dashboard
document.addEventListener('DOMContentLoaded', function() {
        setupEventListeners();
        loadDashboardData();
});

function setupEventListeners() {
    // Institution search
    const institutionSearch = document.getElementById('institutionSearch');
    if (institutionSearch) {
        institutionSearch.addEventListener('input', function() {
            searchInstitutions();
        });
    }
}

async function loadDashboardData() {
    try {
        await Promise.all([
            loadInstitutions(),
            loadSuperAdmins(),
            loadDashboardStats()
        ]);
    } catch (error) {
        console.error('Error loading dashboard data:', error);
        showToast('Error loading dashboard data', 'error');
    }
}

async function loadInstitutions() {
    try {
                console.log('Loading institutions...');
                const response = await fetch('/super-admin/api/institutions');
        const data = await response.json();
                
                console.log('Institutions response:', data);
        
        if (data.success) {
            institutionsData = data.institutions;
                    console.log('Institutions data:', institutionsData);
            renderInstitutionsTable();
        } else {
            throw new Error(data.error);
        }
    } catch (error) {
        console.error('Error loading institutions:', error);
                showToast('Error loading institutions', 'error');
    }
}

function renderInstitutionsTable() {
            console.log('Rendering institutions table with data:', institutionsData);
    const tbody = document.getElementById('institutionsTable');
            if (!tbody) {
                console.error('institutionsTable element not found!');
                return;
            }
    tbody.innerHTML = '';
            
            if (!institutionsData || institutionsData.length === 0) {
                console.log('No institutions data to render');
                tbody.innerHTML = '<tr><td colspan="6" class="text-center">No institutions found</td></tr>';
                return;
            }
    
    institutionsData.forEach(institution => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>
                <div class="d-flex align-items-center">
                    ${institution.logo_url ? `<img src="${institution.logo_url}" alt="${institution.name}" class="rounded me-2" style="width: 32px; height: 32px;">` : '<div class="bg-secondary rounded me-2 d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;"><i class="bi bi-building text-white"></i></div>'}
                    <div>
                        <strong>${institution.name}</strong>
                        <br><small class="text-muted">${institution.subdomain || institution.domain || 'No subdomain'}</small>
                    </div>
                </div>
            </td>
            <td><code>${institution.domain || institution.subdomain || 'N/A'}</code></td>
            <td>
                <span class="badge bg-info">${institution.contact_email || 'No email'}</span>
            </td>
            <td>
                <span class="badge ${institution.is_active ? 'bg-success' : 'bg-danger'}">
                    ${institution.is_active ? 'Active' : 'Inactive'}
                </span>
            </td>
            <td>${new Date(institution.created_at).toLocaleDateString()}</td>
            <td>
                <div class="btn-group btn-group-sm">
                    <button class="btn btn-outline-primary" onclick="editInstitution('${institution.id}')" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </button>
                            <button class="btn btn-outline-${institution.is_active ? 'warning' : 'success'}" onclick="toggleInstitutionStatus('${institution.id}')" title="${institution.is_active ? 'Deactivate' : 'Activate'}">
                        <i class="bi bi-${institution.is_active ? 'pause' : 'play'}"></i>
                    </button>
                    <button class="btn btn-outline-danger" onclick="deleteInstitution('${institution.id}')" title="Delete">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </td>
        `;
        tbody.appendChild(row);
    });
}

        async function loadSuperAdmins() {
            try {
                const response = await fetch('/super-admin/api/super-admins');
                const data = await response.json();
                
                if (data.success) {
                    superAdminsData = data.super_admins;
                    renderSuperAdminsTable();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error loading super admins:', error);
                showToast('Error loading super admins', 'error');
            }
}

function renderSuperAdminsTable() {
    const tbody = document.getElementById('superAdminsTable');
    tbody.innerHTML = '';
            
            if (!superAdminsData || superAdminsData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="text-center">No super admins found</td></tr>';
                return;
            }
    
    superAdminsData.forEach(admin => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td><strong>${admin.name}</strong></td>
            <td>${admin.email}</td>
            <td>
                <span class="badge ${admin.is_active ? 'bg-success' : 'bg-danger'}">
                    ${admin.is_active ? 'Active' : 'Inactive'}
                </span>
            </td>
                    <td>${admin.last_login ? new Date(admin.last_login).toLocaleDateString() : 'Never'}</td>
                    <td>${new Date(admin.created_at).toLocaleDateString()}</td>
            <td>
                <div class="btn-group btn-group-sm">
                    <button class="btn btn-outline-primary" onclick="editSuperAdmin('${admin.id}')" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </button>
                            <button class="btn btn-outline-${admin.is_active ? 'warning' : 'success'}" onclick="toggleSuperAdminStatus('${admin.id}')" title="${admin.is_active ? 'Deactivate' : 'Activate'}">
                        <i class="bi bi-${admin.is_active ? 'pause' : 'play'}"></i>
                    </button>
                </div>
            </td>
        `;
        tbody.appendChild(row);
    });
}

        async function loadDashboardStats() {
            try {
                const response = await fetch('/super-admin/api/stats');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('totalInstitutions').textContent = data.stats.institutions || 0;
                    document.getElementById('totalUsers').textContent = data.stats.total_users || 0;
                    document.getElementById('totalLectures').textContent = data.stats.active_lectures || 0;
                    document.getElementById('totalQuizzes').textContent = data.stats.total_quizzes || 0;
                    
                    // Load analytics charts
                    loadAnalyticsCharts(data.analytics);
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                console.error('Error loading dashboard stats:', error);
                showToast('Error loading dashboard statistics', 'error');
            }
        }

        function loadAnalyticsCharts(analytics) {
            // Growth Chart
            const growthCtx = document.getElementById('growthChart');
            if (growthCtx && analytics) {
                if (growthChart) {
                    growthChart.destroy();
                }
                
                growthChart = new Chart(growthCtx, {
                    type: 'line',
                    data: {
                        labels: analytics.growth_labels || ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Institutions',
                            data: analytics.growth_data || [0, 1, 2, 3, 5, 8],
                            borderColor: '#0d6efd',
                            backgroundColor: 'rgba(13, 110, 253, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // User Distribution Chart
            const userCtx = document.getElementById('userChart');
            if (userCtx && analytics) {
                if (userChart) {
                    userChart.destroy();
                }
                
                const userCounts = analytics.user_counts || { teachers: 0, students: 0, admins: 0 };
                
                userChart = new Chart(userCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Teachers', 'Students', 'Admins'],
                        datasets: [{
                            data: [userCounts.teachers, userCounts.students, userCounts.admins],
                            backgroundColor: ['#198754', '#0dcaf0', '#ffc107'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
}

function searchInstitutions() {
    const searchTerm = document.getElementById('institutionSearch').value.toLowerCase();
    const filteredData = institutionsData.filter(institution => 
        institution.name.toLowerCase().includes(searchTerm) ||
                institution.domain?.toLowerCase().includes(searchTerm) ||
                institution.contact_email?.toLowerCase().includes(searchTerm)
    );
    
            // Temporarily replace data for rendering
    const originalData = institutionsData;
    institutionsData = filteredData;
    renderInstitutionsTable();
    institutionsData = originalData;
}

function showCreateInstitutionModal() {
            console.log('Opening create institution modal...');
            const form = document.getElementById('createInstitutionForm');
            const modal = document.getElementById('createInstitutionModal');
            
            if (!form) {
                console.error('createInstitutionForm not found!');
                return;
            }
            if (!modal) {
                console.error('createInstitutionModal not found!');
                return;
            }
            
            form.reset();
            new bootstrap.Modal(modal).show();
}

function showCreateSuperAdminModal() {
    document.getElementById('createSuperAdminForm').reset();
    new bootstrap.Modal(document.getElementById('createSuperAdminModal')).show();
}

async function createInstitution() {
    const form = document.getElementById('createInstitutionForm');
    
    // Check form validity first
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }
    
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    
    // Debug: Log the data being sent
    console.log('Form data being sent:', data);
    
    try {
                const response = await fetch('/super-admin/api/institutions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
                    let message = 'Institution created successfully';
                    
                    // Show admin details if available
                    if (result.admin) {
                        message += `<br><br><strong>Default Admin Created:</strong><br>
                                   Name: ${result.admin.name}<br>
                                   Email: ${result.admin.email}<br>
                                   Password: ${result.admin.password}<br>
                                   <small class="text-muted">Please share these credentials with the institution admin</small>`;
                    }
                    
                    showToast(message, 'success');
            bootstrap.Modal.getInstance(document.getElementById('createInstitutionModal')).hide();
            loadInstitutions();
            loadDashboardStats();
        } else {
                    showToast(result.error || 'Failed to create institution', 'error');
        }
    } catch (error) {
        console.error('Error creating institution:', error);
                showToast('Error creating institution', 'error');
    }
}

async function createSuperAdmin() {
    const form = document.getElementById('createSuperAdminForm');
    
            if (!form.checkValidity()) {
                form.reportValidity();
        return;
    }
            
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
    
    try {
                const response = await fetch('/super-admin/api/super-admins', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
                    body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            showToast('Super admin created successfully', 'success');
            bootstrap.Modal.getInstance(document.getElementById('createSuperAdminModal')).hide();
            loadSuperAdmins();
        } else {
                    showToast(result.error || 'Failed to create super admin', 'error');
        }
    } catch (error) {
        console.error('Error creating super admin:', error);
                showToast('Error creating super admin', 'error');
            }
        }

        async function toggleInstitutionStatus(institutionId) {
            try {
                const response = await fetch(`/super-admin/api/institutions/${institutionId}/toggle-status`, {
                    method: 'POST'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(result.message, 'success');
                    loadInstitutions();
                    loadDashboardStats();
                } else {
                    showToast(result.error || 'Failed to update institution status', 'error');
                }
            } catch (error) {
                console.error('Error toggling institution status:', error);
                showToast('Error updating institution status', 'error');
            }
        }

        async function deleteInstitution(institutionId) {
            if (!confirm('Are you sure you want to delete this institution? This action cannot be undone.')) {
                return;
            }
            
            try {
                const response = await fetch(`/super-admin/api/institutions/${institutionId}`, {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('Institution deleted successfully', 'success');
                    loadInstitutions();
                    loadDashboardStats();
                } else {
                    showToast(result.error || 'Failed to delete institution', 'error');
                }
            } catch (error) {
                console.error('Error deleting institution:', error);
                showToast('Error deleting institution', 'error');
            }
        }

        async function toggleSuperAdminStatus(adminId) {
            try {
                const response = await fetch(`/super-admin/api/super-admins/${adminId}/toggle-status`, {
                    method: 'POST'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(result.message, 'success');
                    loadSuperAdmins();
                } else {
                    showToast(result.error || 'Failed to update super admin status', 'error');
                }
            } catch (error) {
                console.error('Error toggling super admin status:', error);
                showToast('Error updating super admin status', 'error');
            }
        }

        async function refreshData() {
            showToast('Refreshing data...', 'info');
            await loadDashboardData();
            showToast('Data refreshed successfully', 'success');
        }

        async function logout() {
            try {
                const response = await fetch('/super-admin/logout', {
                    method: 'POST'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    window.location.href = result.redirect_url || '/super-admin/login';
                } else {
                    showToast('Error during logout', 'error');
                }
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = '/super-admin/login';
            }
        }

        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            const toastId = 'toast-' + Date.now();
            
            const typeConfig = {
                'success': { bg: 'bg-success', icon: 'check-circle' },
                'error': { bg: 'bg-danger', icon: 'exclamation-triangle' },
                'warning': { bg: 'bg-warning', icon: 'exclamation-triangle' },
                'info': { bg: 'bg-info', icon: 'info-circle' }
            };
            
            const config = typeConfig[type] || typeConfig['info'];
            
            const toastHtml = `
                <div class="toast" id="${toastId}" role="alert">
                    <div class="toast-header ${config.bg} text-white">
                        <i class="bi bi-${config.icon} me-2"></i>
                        <strong class="me-auto">${type.charAt(0).toUpperCase() + type.slice(1)}</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            toastContainer.insertAdjacentHTML('beforeend', toastHtml);
            
            const toastElement = document.getElementById(toastId);
            const toast = new bootstrap.Toast(toastElement, { delay: 5000 });
            toast.show();
            
            // Remove toast element after it's hidden
            toastElement.addEventListener('hidden.bs.toast', function() {
                toastElement.remove();
            });
        }

        // Placeholder functions for future implementation
        function editInstitution(institutionId) {
            showToast('Edit institution functionality will be implemented', 'info');
        }

        function editSuperAdmin(adminId) {
            showToast('Edit super admin functionality will be implemented', 'info');
        }
</script>
</body>
</html>